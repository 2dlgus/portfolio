{% extends "base.html" %}
{% block title %}Investment Goal Setting - HyeonLee.net{% endblock %}

{% block content %}
<header class="masthead" style="background-image: url('{{ url_for('static', filename='assets/img/insight-bg.jpg') }}')">
  <div class="container px-4 px-lg-5">
    <div class="row justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-7">
        <div class="site-heading">
          <h1>Goal Setting</h1>
          <span class="subheading">
            ê°€ì¥ ë¨¼ì € ìš°ë¦¬ëŠ” íˆ¬ìê¸ˆì•¡ê³¼ ê¸°ê°„, ëª©í‘œ ë“±ì„ ì…ë ¥ í›„ ëª¨ì˜ê³„ì‚°ì„ í†µí•´ ì‹¤í˜„ê°€ëŠ¥ì„±ì„ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•©ë‹ˆë‹¤.
          </span>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="container my-5">

  <!-- í˜„ì¬ ë‹¨ê³„ ì„¤ëª… -->
  <div class="text-center mb-4">
    <h5 class="fw-bold">ğŸ“ í˜„ì¬ ë‹¨ê³„: <span class="text-primary">1ë‹¨ê³„. ëª©í‘œ ì„¤ì •</span></h5>
    <p class="text-muted small">íˆ¬ìê¸ˆ, ê¸°ê°„, ëª©í‘œ ë“±ì„ ì…ë ¥í•˜ì—¬ ì‹¤í˜„ ê°€ëŠ¥ì„±ì„ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
  </div>

  <!-- ë‹¨ê³„ ì¹´ë“œí˜• ë‚´ë¹„ê²Œì´ì…˜ -->
    <div class="d-flex justify-content-between mb-4 px-1 gap-2 overflow-auto" style="flex-wrap: nowrap;">
    {% set stages = [
        ("â‘ ", "ëª©í‘œ ì„¤ì •", True),
        ("â‘¡", "ê³ ìˆ˜ ì›ì¹™", False),
        ("â‘¢", "ë‚˜ì˜ ì›ì¹™", False),
        ("â‘£", "ë§¤ìˆ˜/ë§¤ë„ì „ëµ", False),
        ("â‘¤", "ì§€ê¸ˆ ë§¤ìˆ˜/ë§¤ë„?", False),
        ("â‘¥", "ML ì˜ˆì¸¡", False)
    ] %}
    {% for icon, label, active in stages %}
    <div class="text-center border rounded p-2 {{ 'bg-dark text-white' if active else 'bg-light text-dark' }}"
        style="flex: 1 1 0%; min-width: 120px;">
        <div>{{ icon }}</div>
        <div class="fw-bold text-nowrap small">{{ label }}</div>
    </div>
    {% endfor %}
    </div>

  <!-- ì…ë ¥ í¼ -->
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <form method="POST" action="#result" class="bg-light p-4 rounded shadow-sm" onsubmit="setTimeout(() => window.scrollTo(0, document.body.scrollHeight), 100);">
        <h4 class="fw-bold mb-4 text-center">ğŸ“Œ íˆ¬ì ê¸°ì´ˆ ì •ë³´ ì…ë ¥</h4>

        <div class="mb-3">
          <label for="principal" class="form-label">1ï¸âƒ£ í˜„ì¬ íˆ¬ì ì›ê¸ˆ (ë§Œì›)</label>
          <input type="number" class="form-control" id="principal" name="principal" placeholder="ì˜ˆ: 1000" required>
        </div>

        <div class="mb-3">
          <label for="monthly" class="form-label">2ï¸âƒ£ ë§¤ì›” íˆ¬ì ê¸ˆì•¡ (ë§Œì›)</label>
          <input type="number" class="form-control" id="monthly" name="monthly" placeholder="ì˜ˆ: 50" required>
        </div>

        <div class="mb-3">
          <label for="years" class="form-label">3ï¸âƒ£ íˆ¬ì ê¸°ê°„ (ë…„)</label>
          <input type="number" class="form-control" id="years" name="years" placeholder="ì˜ˆ: 10" required>
        </div>

        <div class="mb-3">
          <label class="form-label">4ï¸âƒ£ ëª©í‘œ ê¸ˆì•¡ ë˜ëŠ” ì—°í‰ê·  ìˆ˜ìµë¥  (%)</label>
          <div class="row">
            <div class="col">
              <input type="number" class="form-control" name="target_amount" placeholder="ëª©í‘œ ê¸ˆì•¡ (ë§Œì›)">
            </div>
            <div class="col">
              <input type="number" step="0.1" class="form-control" name="expected_return" placeholder="ì—°í‰ê·  ìˆ˜ìµë¥  (%)">
            </div>
          </div>
          <small class="text-muted">ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.</small>
        </div>

        <div class="mb-3">
          <label for="purpose" class="form-label">5ï¸âƒ£ íˆ¬ì ëª©ì </label>
          <select class="form-select" id="purpose" name="purpose">
            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
            <option>ì€í‡´ ì¤€ë¹„</option>
            <option>ìë…€ êµìœ¡</option>
            <option>ë‚´ ì§‘ ë§ˆë ¨</option>
            <option>ë¶€ì ë˜ê¸°</option>
            <option>ê¸°íƒ€</option>
          </select>
        </div>

        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-dark btn-lg">ëª¨ì˜ ê³„ì‚°í•˜ê¸°</button>
        </div>
      </form>

      {% if result %}
        <div id="result" class="card mt-4 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">ğŸ“ˆ ëª¨ì˜ê³„ì‚° ê²°ê³¼</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">ğŸ“Œ íˆ¬ì ì›ê¸ˆ: {{ "{:,}".format(result.principal | int) }} ë§Œì›</li>
            <li class="list-group-item">ğŸ“Œ ëª©í‘œ ê¸ˆì•¡: {{ "{:,}".format(result.target_amount | int) }} ë§Œì›</li>
            <li class="list-group-item">ğŸ“Œ ì—°í‰ê·  ìˆ˜ìµë¥ : {{ result.expected_return }}%</li>
            <li class="list-group-item">ğŸ“Œ íˆ¬ì ê¸°ê°„: {{ result.years }}ë…„</li>
            {% if result.purpose %}
            <li class="list-group-item">ğŸ“Œ íˆ¬ì ëª©ì : {{ result.purpose }}</li>
            {% endif %}
            <li class="list-group-item">âœ… ì¶”ì²œ ê°œë³„ ì¢…ëª©: {{ result.stock[0] }} (ì—° ìˆ˜ìµë¥  {{ result.stock[1] }}%)</li>
            <li class="list-group-item">âœ… ì¶”ì²œ ETF: {{ result.etf[0] }} (ì—° ìˆ˜ìµë¥  {{ result.etf[1] }}%)</li>
          </ul>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
